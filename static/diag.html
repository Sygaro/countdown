<!-- static/diag.html -->
<!doctype html>
<html lang="no">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Countdown · Diagnose</title>
    <link rel="stylesheet" href="/static/css/ui.css" />
    <link rel="stylesheet" href="/static/css/diag.css" />
    <link rel="stylesheet" href="/static/css/statusbar.css" />
    <link rel="stylesheet" href="/static/css/topbar.css" />
  </head>
  <body class="admin">
    <header>
      <h1>Diagnose</h1>
      <nav>
        <a href="/">Visning</a>
        <a href="/admin">Admin</a>
        <a class="active" href="/diag">Diagnose</a>
        <a href="/about">Om</a>
      </nav>
    </header>
    <div id="topbar"></div>
    <main class="grid grid-auto">
      <section class="card">
        <h2>Nedtelling (live)</h2>
        <div id="countdown" class="big">00:00</div>
        <div id="phase" class="muted">fase: — · state: —</div>
        <div id="meta" class="muted">mål: — · nå: —</div>
        <div id="both" class="muted">format: — / —</div>
        <pre id="live" class="mono" aria-label="live snapshot">(live)</pre>
        <div class="row">
          <button id="refresh">Oppdater</button>
          <span id="lat" class="chip">latency: — ms</span>
        </div>
      </section>
      <section class="card debug">
        <h2>Debug</h2>
        <div class="tabs">
          <button data-dump="/debug/whoami">/debug/whoami</button>
          <button data-dump="/api/config">/api/config</button>
          <button data-dump="/debug/selftest">/debug/selftest</button>
          <button data-dump="/debug/view-heartbeat">/debug/view-heartbeat</button>
        </div>
        <pre id="raw" class="mono" aria-label="debug output">(tom)</pre>
      </section>
      <section class="card">
        <h2>Selvtest</h2>
        <p>Rask sanitetssjekk av kjerne-logikk (ikke pytest).</p>
        <ul id="selftest"></ul>
        <div class="row">
          <button id="run_selftest">Kjør selvtest</button>
        </div>
      </section>
      <section class="card">
        <h2>NTP / Tidssynk</h2>
        <pre id="ntp_details" class="mono muted">—</pre>
      </section>
    </main>
    <script type="module">
      import { Topbar } from "/static/js/topbar.js";
      Topbar.init({ el: "#topbar", layout: "compact" });
    </script>
    <script src="/static/js/ui.js" defer></script>
    <script type="module" src="/static/js/topbar.js"></script>
    <script type="module" src="/static/js/diag.js"></script>
    <script type="module" src="/static/js/statusbar.js"></script>
  </body>
</html>
